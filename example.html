<!doctype html>
<html>
  <head>
    <title>example</title>
  </head>

  <body>
    <input type="text">
    <h1>Hola</h1>
    <webview src="example-webview.html"></webview>
  </body>
  <script>
    // const context = require('electron-contextmenu-middleware');
    const debugMenu = require('.').middleware;
    const {remote} = require('electron');
    const {webContents} = remote;
/*
    context.use(debugMenu);

    context.use((ctx, next) => {
      ctx.menu.push({
        label: 'Test 2',
        click: () => alert('Test 2 clicked')
      });
      next();
    });

    context.activate();*/

    const webviews = document.querySelectorAll('webview');
    webviews.forEach(wv => {
      wv.addEventListener('dom-ready', () => {
        for (let wc of webContents.getAllWebContents()) {
          // Check if `wc` belongs to a webview in the `win` window.
          if (wc.id === wv.guestinstance) {
            wc.executeJavaScript(`
              require('${__dirname}').install();
            `);
          }
        }


      });
    });
  </script>
</html>
